/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var nr=Object.create;var Be=Object.defineProperty;var sr=Object.getOwnPropertyDescriptor;var ar=Object.getOwnPropertyNames;var pr=Object.getPrototypeOf,lr=Object.prototype.hasOwnProperty;var fr=(r,e)=>{for(var t in e)Be(r,t,{get:e[t],enumerable:!0})},Ot=(r,e,t,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of ar(e))!lr.call(r,i)&&i!==t&&Be(r,i,{get:()=>e[i],enumerable:!(o=sr(e,i))||o.enumerable});return r};var cr=(r,e,t)=>(t=r!=null?nr(pr(r)):{},Ot(e||!r||!r.__esModule?Be(t,"default",{value:r,enumerable:!0}):t,r)),ur=r=>Ot(Be({},"__esModule",{value:!0}),r);var Gr={};fr(Gr,{default:()=>Je});module.exports=ur(Gr);var Qt=require("obsidian");var ge=require("obsidian");var G=class extends Error{};var J=require("obsidian");function mr(r,e){e=(0,J.normalizePath)(e);let t=r.vault.getAbstractFileByPath(e);if(!t)throw new G(`Folder "${e}" doesn't exist`);if(!(t instanceof J.TFolder))throw new G(`${e} is a file, not a folder`);return t}function Tt(r,e){e=(0,J.normalizePath)(e);let t=r.vault.getAbstractFileByPath(e);if(!t)throw new G(`File "${e}" doesn't exist`);if(!(t instanceof J.TFile))throw new G(`${e} is a folder, not a file`);return t}function Mt(r,e){let t=mr(r,e),o=[];return J.Vault.recurseChildren(t,i=>{i instanceof J.TFile&&o.push(i)}),o.sort((i,n)=>i.basename.localeCompare(n.basename)),o}var Oe=class{constructor(e,t){this.plugin=e;this.settings=t;this.modulesWithUnload=[];this.app=e.app}async onload(){try{await this.runJsModules(),await this.runSnippets()}catch(e){Error.captureStackTrace(e),this.logScriptError(`Failed with error: ${e.message}`,e)}}async runSnippet(e,t){try{Function("plugin","require",e)(this.plugin,require)}catch(o){Error.captureStackTrace(o),new ge.Notice(`obsidian-user-plugins: error running snippet no.${t}`,5e3),this.logScriptError(`Error running snippet no.${t}: ${o.message}`,o)}}async runSnippets(){let e=0;for(let t of this.settings.snippets)await this.runSnippet(t,e),e++}async runJsModule(e){if(!e&&e==="")return;let t;try{t=Tt(this.app,e)}catch(i){if(i instanceof G){this.logError(`Error resolving file ${e}: ${i.message}`),new ge.Notice("obsidian-user-plugins: "+i.message,5e3);return}this.logError(`Error: ${i}`);return}let o={};try{Function("module","require",await this.app.vault.read(t))(o,require)}catch(i){Error.captureStackTrace(i),this.logScriptError(`${t.path} evaluation error: ${i.message}`,i),new ge.Notice("obsidian-user-plugins: cannot evaluate: "+t.path,5e3);return}try{if(!o.exports){console.log("[obsidian-user-plugins] no exports found in "+t.path);return}if(o.exports.onload)await o.exports.onload(this.plugin),o.exports.onunload&&this.modulesWithUnload.push([t.path,{type:"module",object:{onunload:o.exports.onunload,onload:o.exports.onload}}]);else if(o.exports.default){let i=new o.exports.default(this.app,this.plugin.manifest);await i.onload(),this.modulesWithUnload.push([t.path,{type:"plugin",object:i}])}}catch(i){Error.captureStackTrace(i),this.logScriptError(`${t.path}.onload error: ${i.message}`,i),new ge.Notice("obsidian-user-plugins: error in onload: "+t.path,5e3);return}}async runOnunload(e){let t=[];await Promise.all(this.modulesWithUnload.filter(([o,i])=>o===e).map(async([o,i],n)=>{await this.runOnunloadOfUserModule(o,i),t.push(n)})),t.slice().reverse().forEach(o=>this.modulesWithUnload.splice(o,1))}async runJsModules(){for(let e of this.settings.enabledScripts)await this.runJsModule(e)}logScriptError(e,t){this.logError(`${e}. stacktrace: ${t.stack}`)}logError(e){console.error(`[obsidian-user-plugins] ${e}`)}async runOnunloadOfUserModule(e,t){try{t.object.onunload&&(t.type==="plugin"?await t.object.onunload():await t.object.onunload(this.plugin))}catch(o){Error.captureStackTrace(o),this.logScriptError(`Error running ${e}.onunload: ${o.message}`,o),new ge.Notice("obsidian-user-plugins: error in onunload: "+e,5e3)}}async onunload(){for(let[e,t]of this.modulesWithUnload)await this.runOnunloadOfUserModule(e,t)}};var Yr=cr(require("obsidian"));var X=require("obsidian");var Yt=require("obsidian");var Jt=require("obsidian");var T="top",L="bottom",C="right",P="left",Ie="auto",te=[T,L,C,P],K="start",se="end",Pt="clippingParents",ke="viewport",he="popper",At="reference",Ze=te.reduce(function(r,e){return r.concat([e+"-"+K,e+"-"+se])},[]),$e=[].concat(te,[Ie]).reduce(function(r,e){return r.concat([e,e+"-"+K,e+"-"+se])},[]),dr="beforeRead",gr="read",hr="afterRead",vr="beforeMain",yr="main",xr="afterMain",wr="beforeWrite",br="write",Er="afterWrite",Ct=[dr,gr,hr,vr,yr,xr,wr,br,Er];function F(r){return r?(r.nodeName||"").toLowerCase():null}function A(r){if(r==null)return window;if(r.toString()!=="[object Window]"){var e=r.ownerDocument;return e&&e.defaultView||window}return r}function Y(r){var e=A(r).Element;return r instanceof e||r instanceof Element}function R(r){var e=A(r).HTMLElement;return r instanceof e||r instanceof HTMLElement}function ve(r){if(typeof ShadowRoot=="undefined")return!1;var e=A(r).ShadowRoot;return r instanceof e||r instanceof ShadowRoot}function Sr(r){var e=r.state;Object.keys(e.elements).forEach(function(t){var o=e.styles[t]||{},i=e.attributes[t]||{},n=e.elements[t];!R(n)||!F(n)||(Object.assign(n.style,o),Object.keys(i).forEach(function(s){var p=i[s];p===!1?n.removeAttribute(s):n.setAttribute(s,p===!0?"":p)}))})}function Or(r){var e=r.state,t={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,t.popper),e.styles=t,e.elements.arrow&&Object.assign(e.elements.arrow.style,t.arrow),function(){Object.keys(e.elements).forEach(function(o){var i=e.elements[o],n=e.attributes[o]||{},s=Object.keys(e.styles.hasOwnProperty(o)?e.styles[o]:t[o]),p=s.reduce(function(a,f){return a[f]="",a},{});!R(i)||!F(i)||(Object.assign(i.style,p),Object.keys(n).forEach(function(a){i.removeAttribute(a)}))})}}var Lt={name:"applyStyles",enabled:!0,phase:"write",fn:Sr,effect:Or,requires:["computeStyles"]};function D(r){return r.split("-")[0]}var _=Math.max,ae=Math.min,Q=Math.round;function W(r,e){e===void 0&&(e=!1);var t=r.getBoundingClientRect(),o=1,i=1;if(R(r)&&e){var n=r.offsetHeight,s=r.offsetWidth;s>0&&(o=Q(t.width)/s||1),n>0&&(i=Q(t.height)/n||1)}return{width:t.width/o,height:t.height/i,top:t.top/i,right:t.right/o,bottom:t.bottom/i,left:t.left/o,x:t.left/o,y:t.top/i}}function pe(r){var e=W(r),t=r.offsetWidth,o=r.offsetHeight;return Math.abs(e.width-t)<=1&&(t=e.width),Math.abs(e.height-o)<=1&&(o=e.height),{x:r.offsetLeft,y:r.offsetTop,width:t,height:o}}function Te(r,e){var t=e.getRootNode&&e.getRootNode();if(r.contains(e))return!0;if(t&&ve(t)){var o=e;do{if(o&&r.isSameNode(o))return!0;o=o.parentNode||o.host}while(o)}return!1}function I(r){return A(r).getComputedStyle(r)}function et(r){return["table","td","th"].indexOf(F(r))>=0}function B(r){return((Y(r)?r.ownerDocument:r.document)||window.document).documentElement}function Z(r){return F(r)==="html"?r:r.assignedSlot||r.parentNode||(ve(r)?r.host:null)||B(r)}function Rt(r){return!R(r)||I(r).position==="fixed"?null:r.offsetParent}function Tr(r){var e=navigator.userAgent.toLowerCase().indexOf("firefox")!==-1,t=navigator.userAgent.indexOf("Trident")!==-1;if(t&&R(r)){var o=I(r);if(o.position==="fixed")return null}var i=Z(r);for(ve(i)&&(i=i.host);R(i)&&["html","body"].indexOf(F(i))<0;){var n=I(i);if(n.transform!=="none"||n.perspective!=="none"||n.contain==="paint"||["transform","perspective"].indexOf(n.willChange)!==-1||e&&n.willChange==="filter"||e&&n.filter&&n.filter!=="none")return i;i=i.parentNode}return null}function q(r){for(var e=A(r),t=Rt(r);t&&et(t)&&I(t).position==="static";)t=Rt(t);return t&&(F(t)==="html"||F(t)==="body"&&I(t).position==="static")?e:t||Tr(r)||e}function le(r){return["top","bottom"].indexOf(r)>=0?"x":"y"}function fe(r,e,t){return _(r,ae(e,t))}function Ft(r,e,t){var o=fe(r,e,t);return o>t?t:o}function Me(){return{top:0,right:0,bottom:0,left:0}}function Pe(r){return Object.assign({},Me(),r)}function Ae(r,e){return e.reduce(function(t,o){return t[o]=r,t},{})}var Mr=function(e,t){return e=typeof e=="function"?e(Object.assign({},t.rects,{placement:t.placement})):e,Pe(typeof e!="number"?e:Ae(e,te))};function Pr(r){var e,t=r.state,o=r.name,i=r.options,n=t.elements.arrow,s=t.modifiersData.popperOffsets,p=D(t.placement),a=le(p),f=[P,C].indexOf(p)>=0,l=f?"height":"width";if(!(!n||!s)){var g=Mr(i.padding,t),b=pe(n),c=a==="y"?T:P,y=a==="y"?L:C,u=t.rects.reference[l]+t.rects.reference[a]-s[a]-t.rects.popper[l],m=s[a]-t.rects.reference[a],E=q(n),S=E?a==="y"?E.clientHeight||0:E.clientWidth||0:0,O=u/2-m/2,d=g[c],v=S-b[l]-g[y],h=S/2-b[l]/2+O,x=fe(d,h,v),M=a;t.modifiersData[o]=(e={},e[M]=x,e.centerOffset=x-h,e)}}function Ar(r){var e=r.state,t=r.options,o=t.element,i=o===void 0?"[data-popper-arrow]":o;i!=null&&(typeof i=="string"&&(i=e.elements.popper.querySelector(i),!i)||Te(e.elements.popper,i)&&(e.elements.arrow=i))}var Dt={name:"arrow",enabled:!0,phase:"main",fn:Pr,effect:Ar,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function U(r){return r.split("-")[1]}var Cr={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Lr(r){var e=r.x,t=r.y,o=window,i=o.devicePixelRatio||1;return{x:Q(e*i)/i||0,y:Q(t*i)/i||0}}function Nt(r){var e,t=r.popper,o=r.popperRect,i=r.placement,n=r.variation,s=r.offsets,p=r.position,a=r.gpuAcceleration,f=r.adaptive,l=r.roundOffsets,g=r.isFixed,b=s.x,c=b===void 0?0:b,y=s.y,u=y===void 0?0:y,m=typeof l=="function"?l({x:c,y:u}):{x:c,y:u};c=m.x,u=m.y;var E=s.hasOwnProperty("x"),S=s.hasOwnProperty("y"),O=P,d=T,v=window;if(f){var h=q(t),x="clientHeight",M="clientWidth";if(h===A(t)&&(h=B(t),I(h).position!=="static"&&p==="absolute"&&(x="scrollHeight",M="scrollWidth")),h=h,i===T||(i===P||i===C)&&n===se){d=L;var N=g&&h===v&&v.visualViewport?v.visualViewport.height:h[x];u-=N-o.height,u*=a?1:-1}if(i===P||(i===T||i===L)&&n===se){O=C;var j=g&&h===v&&v.visualViewport?v.visualViewport.width:h[M];c-=j-o.width,c*=a?1:-1}}var w=Object.assign({position:p},f&&Cr),k=l===!0?Lr({x:c,y:u}):{x:c,y:u};if(c=k.x,u=k.y,a){var $;return Object.assign({},w,($={},$[d]=S?"0":"",$[O]=E?"0":"",$.transform=(v.devicePixelRatio||1)<=1?"translate("+c+"px, "+u+"px)":"translate3d("+c+"px, "+u+"px, 0)",$))}return Object.assign({},w,(e={},e[d]=S?u+"px":"",e[O]=E?c+"px":"",e.transform="",e))}function Rr(r){var e=r.state,t=r.options,o=t.gpuAcceleration,i=o===void 0?!0:o,n=t.adaptive,s=n===void 0?!0:n,p=t.roundOffsets,a=p===void 0?!0:p;if(!1)var f;var l={placement:D(e.placement),variation:U(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,Nt(Object.assign({},l,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:s,roundOffsets:a})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,Nt(Object.assign({},l,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:a})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}var jt={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Rr,data:{}};var He={passive:!0};function Fr(r){var e=r.state,t=r.instance,o=r.options,i=o.scroll,n=i===void 0?!0:i,s=o.resize,p=s===void 0?!0:s,a=A(e.elements.popper),f=[].concat(e.scrollParents.reference,e.scrollParents.popper);return n&&f.forEach(function(l){l.addEventListener("scroll",t.update,He)}),p&&a.addEventListener("resize",t.update,He),function(){n&&f.forEach(function(l){l.removeEventListener("scroll",t.update,He)}),p&&a.removeEventListener("resize",t.update,He)}}var Bt={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Fr,data:{}};var Dr={left:"right",right:"left",bottom:"top",top:"bottom"};function ye(r){return r.replace(/left|right|bottom|top/g,function(e){return Dr[e]})}var Nr={start:"end",end:"start"};function We(r){return r.replace(/start|end/g,function(e){return Nr[e]})}function ce(r){var e=A(r),t=e.pageXOffset,o=e.pageYOffset;return{scrollLeft:t,scrollTop:o}}function ue(r){return W(B(r)).left+ce(r).scrollLeft}function tt(r){var e=A(r),t=B(r),o=e.visualViewport,i=t.clientWidth,n=t.clientHeight,s=0,p=0;return o&&(i=o.width,n=o.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(s=o.offsetLeft,p=o.offsetTop)),{width:i,height:n,x:s+ue(r),y:p}}function rt(r){var e,t=B(r),o=ce(r),i=(e=r.ownerDocument)==null?void 0:e.body,n=_(t.scrollWidth,t.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),s=_(t.scrollHeight,t.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),p=-o.scrollLeft+ue(r),a=-o.scrollTop;return I(i||t).direction==="rtl"&&(p+=_(t.clientWidth,i?i.clientWidth:0)-n),{width:n,height:s,x:p,y:a}}function me(r){var e=I(r),t=e.overflow,o=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(t+i+o)}function Ue(r){return["html","body","#document"].indexOf(F(r))>=0?r.ownerDocument.body:R(r)&&me(r)?r:Ue(Z(r))}function re(r,e){var t;e===void 0&&(e=[]);var o=Ue(r),i=o===((t=r.ownerDocument)==null?void 0:t.body),n=A(o),s=i?[n].concat(n.visualViewport||[],me(o)?o:[]):o,p=e.concat(s);return i?p:p.concat(re(Z(s)))}function xe(r){return Object.assign({},r,{left:r.x,top:r.y,right:r.x+r.width,bottom:r.y+r.height})}function jr(r){var e=W(r);return e.top=e.top+r.clientTop,e.left=e.left+r.clientLeft,e.bottom=e.top+r.clientHeight,e.right=e.left+r.clientWidth,e.width=r.clientWidth,e.height=r.clientHeight,e.x=e.left,e.y=e.top,e}function It(r,e){return e===ke?xe(tt(r)):Y(e)?jr(e):xe(rt(B(r)))}function Br(r){var e=re(Z(r)),t=["absolute","fixed"].indexOf(I(r).position)>=0,o=t&&R(r)?q(r):r;return Y(o)?e.filter(function(i){return Y(i)&&Te(i,o)&&F(i)!=="body"}):[]}function ot(r,e,t){var o=e==="clippingParents"?Br(r):[].concat(e),i=[].concat(o,[t]),n=i[0],s=i.reduce(function(p,a){var f=It(r,a);return p.top=_(f.top,p.top),p.right=ae(f.right,p.right),p.bottom=ae(f.bottom,p.bottom),p.left=_(f.left,p.left),p},It(r,n));return s.width=s.right-s.left,s.height=s.bottom-s.top,s.x=s.left,s.y=s.top,s}function Ce(r){var e=r.reference,t=r.element,o=r.placement,i=o?D(o):null,n=o?U(o):null,s=e.x+e.width/2-t.width/2,p=e.y+e.height/2-t.height/2,a;switch(i){case T:a={x:s,y:e.y-t.height};break;case L:a={x:s,y:e.y+e.height};break;case C:a={x:e.x+e.width,y:p};break;case P:a={x:e.x-t.width,y:p};break;default:a={x:e.x,y:e.y}}var f=i?le(i):null;if(f!=null){var l=f==="y"?"height":"width";switch(n){case K:a[f]=a[f]-(e[l]/2-t[l]/2);break;case se:a[f]=a[f]+(e[l]/2-t[l]/2);break;default:}}return a}function z(r,e){e===void 0&&(e={});var t=e,o=t.placement,i=o===void 0?r.placement:o,n=t.boundary,s=n===void 0?Pt:n,p=t.rootBoundary,a=p===void 0?ke:p,f=t.elementContext,l=f===void 0?he:f,g=t.altBoundary,b=g===void 0?!1:g,c=t.padding,y=c===void 0?0:c,u=Pe(typeof y!="number"?y:Ae(y,te)),m=l===he?At:he,E=r.rects.popper,S=r.elements[b?m:l],O=ot(Y(S)?S:S.contextElement||B(r.elements.popper),s,a),d=W(r.elements.reference),v=Ce({reference:d,element:E,strategy:"absolute",placement:i}),h=xe(Object.assign({},E,v)),x=l===he?h:d,M={top:O.top-x.top+u.top,bottom:x.bottom-O.bottom+u.bottom,left:O.left-x.left+u.left,right:x.right-O.right+u.right},N=r.modifiersData.offset;if(l===he&&N){var j=N[i];Object.keys(M).forEach(function(w){var k=[C,L].indexOf(w)>=0?1:-1,$=[T,L].indexOf(w)>=0?"y":"x";M[w]+=j[$]*k})}return M}function it(r,e){e===void 0&&(e={});var t=e,o=t.placement,i=t.boundary,n=t.rootBoundary,s=t.padding,p=t.flipVariations,a=t.allowedAutoPlacements,f=a===void 0?$e:a,l=U(o),g=l?p?Ze:Ze.filter(function(y){return U(y)===l}):te,b=g.filter(function(y){return f.indexOf(y)>=0});b.length===0&&(b=g);var c=b.reduce(function(y,u){return y[u]=z(r,{placement:u,boundary:i,rootBoundary:n,padding:s})[D(u)],y},{});return Object.keys(c).sort(function(y,u){return c[y]-c[u]})}function Ir(r){if(D(r)===Ie)return[];var e=ye(r);return[We(r),e,We(e)]}function kr(r){var e=r.state,t=r.options,o=r.name;if(!e.modifiersData[o]._skip){for(var i=t.mainAxis,n=i===void 0?!0:i,s=t.altAxis,p=s===void 0?!0:s,a=t.fallbackPlacements,f=t.padding,l=t.boundary,g=t.rootBoundary,b=t.altBoundary,c=t.flipVariations,y=c===void 0?!0:c,u=t.allowedAutoPlacements,m=e.options.placement,E=D(m),S=E===m,O=a||(S||!y?[ye(m)]:Ir(m)),d=[m].concat(O).reduce(function(de,ee){return de.concat(D(ee)===Ie?it(e,{placement:ee,boundary:l,rootBoundary:g,padding:f,flipVariations:y,allowedAutoPlacements:u}):ee)},[]),v=e.rects.reference,h=e.rects.popper,x=new Map,M=!0,N=d[0],j=0;j<d.length;j++){var w=d[j],k=D(w),$=U(w)===K,we=[T,L].indexOf(k)>=0,be=we?"width":"height",H=z(e,{placement:w,boundary:l,rootBoundary:g,altBoundary:b,padding:f}),V=we?$?C:P:$?L:T;v[be]>h[be]&&(V=ye(V));var Re=ye(V),oe=[];if(n&&oe.push(H[k]<=0),p&&oe.push(H[V]<=0,H[Re]<=0),oe.every(function(de){return de})){N=w,M=!1;break}x.set(w,oe)}if(M)for(var Fe=y?3:1,Ye=function(ee){var Se=d.find(function(Ne){var ie=x.get(Ne);if(ie)return ie.slice(0,ee).every(function(Ge){return Ge})});if(Se)return N=Se,"break"},Ee=Fe;Ee>0;Ee--){var De=Ye(Ee);if(De==="break")break}e.placement!==N&&(e.modifiersData[o]._skip=!0,e.placement=N,e.reset=!0)}}var kt={name:"flip",enabled:!0,phase:"main",fn:kr,requiresIfExists:["offset"],data:{_skip:!1}};function $t(r,e,t){return t===void 0&&(t={x:0,y:0}),{top:r.top-e.height-t.y,right:r.right-e.width+t.x,bottom:r.bottom-e.height+t.y,left:r.left-e.width-t.x}}function Ht(r){return[T,C,L,P].some(function(e){return r[e]>=0})}function $r(r){var e=r.state,t=r.name,o=e.rects.reference,i=e.rects.popper,n=e.modifiersData.preventOverflow,s=z(e,{elementContext:"reference"}),p=z(e,{altBoundary:!0}),a=$t(s,o),f=$t(p,i,n),l=Ht(a),g=Ht(f);e.modifiersData[t]={referenceClippingOffsets:a,popperEscapeOffsets:f,isReferenceHidden:l,hasPopperEscaped:g},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":l,"data-popper-escaped":g})}var Wt={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:$r};function Hr(r,e,t){var o=D(r),i=[P,T].indexOf(o)>=0?-1:1,n=typeof t=="function"?t(Object.assign({},e,{placement:r})):t,s=n[0],p=n[1];return s=s||0,p=(p||0)*i,[P,C].indexOf(o)>=0?{x:p,y:s}:{x:s,y:p}}function Wr(r){var e=r.state,t=r.options,o=r.name,i=t.offset,n=i===void 0?[0,0]:i,s=$e.reduce(function(l,g){return l[g]=Hr(g,e.rects,n),l},{}),p=s[e.placement],a=p.x,f=p.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=a,e.modifiersData.popperOffsets.y+=f),e.modifiersData[o]=s}var Ut={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Wr};function Ur(r){var e=r.state,t=r.name;e.modifiersData[t]=Ce({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}var Vt={name:"popperOffsets",enabled:!0,phase:"read",fn:Ur,data:{}};function nt(r){return r==="x"?"y":"x"}function Vr(r){var e=r.state,t=r.options,o=r.name,i=t.mainAxis,n=i===void 0?!0:i,s=t.altAxis,p=s===void 0?!1:s,a=t.boundary,f=t.rootBoundary,l=t.altBoundary,g=t.padding,b=t.tether,c=b===void 0?!0:b,y=t.tetherOffset,u=y===void 0?0:y,m=z(e,{boundary:a,rootBoundary:f,padding:g,altBoundary:l}),E=D(e.placement),S=U(e.placement),O=!S,d=le(E),v=nt(d),h=e.modifiersData.popperOffsets,x=e.rects.reference,M=e.rects.popper,N=typeof u=="function"?u(Object.assign({},e.rects,{placement:e.placement})):u,j=typeof N=="number"?{mainAxis:N,altAxis:N}:Object.assign({mainAxis:0,altAxis:0},N),w=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,k={x:0,y:0};if(h){if(n){var $,we=d==="y"?T:P,be=d==="y"?L:C,H=d==="y"?"height":"width",V=h[d],Re=V+m[we],oe=V-m[be],Fe=c?-M[H]/2:0,Ye=S===K?x[H]:M[H],Ee=S===K?-M[H]:-x[H],De=e.elements.arrow,de=c&&De?pe(De):{width:0,height:0},ee=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:Me(),Se=ee[we],Ne=ee[be],ie=fe(0,x[H],de[H]),Ge=O?x[H]/2-Fe-ie-Se-j.mainAxis:Ye-ie-Se-j.mainAxis,Zt=O?-x[H]/2+Fe+ie+Ne+j.mainAxis:Ee+ie+Ne+j.mainAxis,Ke=e.elements.arrow&&q(e.elements.arrow),er=Ke?d==="y"?Ke.clientTop||0:Ke.clientLeft||0:0,gt=($=w==null?void 0:w[d])!=null?$:0,tr=V+Ge-gt-er,rr=V+Zt-gt,ht=fe(c?ae(Re,tr):Re,V,c?_(oe,rr):oe);h[d]=ht,k[d]=ht-V}if(p){var vt,or=d==="x"?T:P,ir=d==="x"?L:C,ne=h[v],je=v==="y"?"height":"width",yt=ne+m[or],xt=ne-m[ir],Qe=[T,P].indexOf(E)!==-1,wt=(vt=w==null?void 0:w[v])!=null?vt:0,bt=Qe?yt:ne-x[je]-M[je]-wt+j.altAxis,Et=Qe?ne+x[je]+M[je]-wt-j.altAxis:xt,St=c&&Qe?Ft(bt,ne,Et):fe(c?bt:yt,ne,c?Et:xt);h[v]=St,k[v]=St-ne}e.modifiersData[o]=k}}var _t={name:"preventOverflow",enabled:!0,phase:"main",fn:Vr,requiresIfExists:["offset"]};function st(r){return{scrollLeft:r.scrollLeft,scrollTop:r.scrollTop}}function at(r){return r===A(r)||!R(r)?ce(r):st(r)}function _r(r){var e=r.getBoundingClientRect(),t=Q(e.width)/r.offsetWidth||1,o=Q(e.height)/r.offsetHeight||1;return t!==1||o!==1}function pt(r,e,t){t===void 0&&(t=!1);var o=R(e),i=R(e)&&_r(e),n=B(e),s=W(r,i),p={scrollLeft:0,scrollTop:0},a={x:0,y:0};return(o||!o&&!t)&&((F(e)!=="body"||me(n))&&(p=at(e)),R(e)?(a=W(e,!0),a.x+=e.clientLeft,a.y+=e.clientTop):n&&(a.x=ue(n))),{x:s.left+p.scrollLeft-a.x,y:s.top+p.scrollTop-a.y,width:s.width,height:s.height}}function qr(r){var e=new Map,t=new Set,o=[];r.forEach(function(n){e.set(n.name,n)});function i(n){t.add(n.name);var s=[].concat(n.requires||[],n.requiresIfExists||[]);s.forEach(function(p){if(!t.has(p)){var a=e.get(p);a&&i(a)}}),o.push(n)}return r.forEach(function(n){t.has(n.name)||i(n)}),o}function lt(r){var e=qr(r);return Ct.reduce(function(t,o){return t.concat(e.filter(function(i){return i.phase===o}))},[])}function ft(r){var e;return function(){return e||(e=new Promise(function(t){Promise.resolve().then(function(){e=void 0,t(r())})})),e}}function ct(r){var e=r.reduce(function(t,o){var i=t[o.name];return t[o.name]=i?Object.assign({},i,o,{options:Object.assign({},i.options,o.options),data:Object.assign({},i.data,o.data)}):o,t},{});return Object.keys(e).map(function(t){return e[t]})}var qt={placement:"bottom",modifiers:[],strategy:"absolute"};function zt(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];return!e.some(function(o){return!(o&&typeof o.getBoundingClientRect=="function")})}function Xt(r){r===void 0&&(r={});var e=r,t=e.defaultModifiers,o=t===void 0?[]:t,i=e.defaultOptions,n=i===void 0?qt:i;return function(p,a,f){f===void 0&&(f=n);var l={placement:"bottom",orderedModifiers:[],options:Object.assign({},qt,n),modifiersData:{},elements:{reference:p,popper:a},attributes:{},styles:{}},g=[],b=!1,c={state:l,setOptions:function(E){var S=typeof E=="function"?E(l.options):E;u(),l.options=Object.assign({},n,l.options,S),l.scrollParents={reference:Y(p)?re(p):p.contextElement?re(p.contextElement):[],popper:re(a)};var O=lt(ct([].concat(o,l.options.modifiers)));if(l.orderedModifiers=O.filter(function(w){return w.enabled}),!1){var d;if(getBasePlacement(l.options.placement)===auto)var v;var h,x,M,N,j}return y(),c.update()},forceUpdate:function(){if(!b){var E=l.elements,S=E.reference,O=E.popper;if(zt(S,O)){l.rects={reference:pt(S,q(O),l.options.strategy==="fixed"),popper:pe(O)},l.reset=!1,l.placement=l.options.placement,l.orderedModifiers.forEach(function(w){return l.modifiersData[w.name]=Object.assign({},w.data)});for(var d=0,v=0;v<l.orderedModifiers.length;v++){if(l.reset===!0){l.reset=!1,v=-1;continue}var h=l.orderedModifiers[v],x=h.fn,M=h.options,N=M===void 0?{}:M,j=h.name;typeof x=="function"&&(l=x({state:l,options:N,name:j,instance:c})||l)}}}},update:ft(function(){return new Promise(function(m){c.forceUpdate(),m(l)})}),destroy:function(){u(),b=!0}};if(!zt(p,a))return c;c.setOptions(f).then(function(m){!b&&f.onFirstUpdate&&f.onFirstUpdate(m)});function y(){l.orderedModifiers.forEach(function(m){var E=m.name,S=m.options,O=S===void 0?{}:S,d=m.effect;if(typeof d=="function"){var v=d({state:l,name:E,instance:c,options:O}),h=function(){};g.push(v||h)}})}function u(){g.forEach(function(m){return m()}),g=[]}return c}}var zr=[Bt,Vt,jt,Lt,Ut,kt,_t,Dt,Wt],ut=Xt({defaultModifiers:zr});var Xr=(r,e)=>(r%e+e)%e,mt=class{constructor(e,t,o){this.owner=e,this.containerEl=t,t.on("click",".suggestion-item",this.onSuggestionClick.bind(this)),t.on("mousemove",".suggestion-item",this.onSuggestionMouseover.bind(this)),o.register([],"ArrowUp",i=>{if(!i.isComposing)return this.setSelectedItem(this.selectedItem-1,!0),!1}),o.register([],"ArrowDown",i=>{if(!i.isComposing)return this.setSelectedItem(this.selectedItem+1,!0),!1}),o.register([],"Enter",i=>{if(!i.isComposing)return this.useSelectedItem(i),!1})}onSuggestionClick(e,t){e.preventDefault();let o=this.suggestions.indexOf(t);this.setSelectedItem(o,!1),this.useSelectedItem(e)}onSuggestionMouseover(e,t){let o=this.suggestions.indexOf(t);this.setSelectedItem(o,!1)}setSuggestions(e){this.containerEl.empty();let t=[];e.forEach(o=>{let i=this.containerEl.createDiv("suggestion-item");this.owner.renderSuggestion(o,i),t.push(i)}),this.values=e,this.suggestions=t,this.setSelectedItem(0,!1)}useSelectedItem(e){let t=this.values[this.selectedItem];t&&this.owner.selectSuggestion(t,e)}setSelectedItem(e,t){let o=Xr(e,this.suggestions.length),i=this.suggestions[this.selectedItem],n=this.suggestions[o];i==null||i.removeClass("is-selected"),n==null||n.addClass("is-selected"),this.selectedItem=o,t&&n.scrollIntoView(!1)}},Ve=class{constructor(e,t){this.app=e,this.inputEl=t,this.scope=new Jt.Scope,this.suggestEl=createDiv("suggestion-container");let o=this.suggestEl.createDiv("suggestion");this.suggest=new mt(this,o,this.scope),this.scope.register([],"Escape",this.close.bind(this)),this.inputEl.addEventListener("input",this.onInputChanged.bind(this)),this.inputEl.addEventListener("focus",this.onInputChanged.bind(this)),this.inputEl.addEventListener("blur",this.close.bind(this)),this.suggestEl.on("mousedown",".suggestion-container",i=>{i.preventDefault()})}onInputChanged(){let e=this.inputEl.value,t=this.getSuggestions(e);if(!t){this.close();return}t.length>0?(this.suggest.setSuggestions(t),this.open(this.app.dom.appContainerEl,this.inputEl)):this.close()}open(e,t){this.app.keymap.pushScope(this.scope),e.appendChild(this.suggestEl),this.popper=ut(t,this.suggestEl,{placement:"bottom-start",modifiers:[{name:"sameWidth",enabled:!0,fn:({state:o,instance:i})=>{let n=`${o.rects.reference.width}px`;o.styles.popper.width!==n&&(o.styles.popper.width=n,i.update())},phase:"beforeWrite",requires:["computeStyles"]}]})}close(){this.app.keymap.popScope(this.scope),this.suggest.setSuggestions([]),this.popper&&this.popper.destroy(),this.suggestEl.detach()}};var _e=class extends Ve{getSuggestions(r){let e=this.app.vault.getAllLoadedFiles(),t=[],o=r.toLowerCase();return e.forEach(i=>{i instanceof Yt.TFolder&&i.path.toLowerCase().contains(o)&&t.push(i)}),t}renderSuggestion(r,e){e.setText(r.path)}selectSuggestion(r){this.inputEl.value=r.path,this.inputEl.trigger("input"),this.close()}};var Jr={snippets:[""],scriptsFolder:"",enabledScripts:[""]},qe=class{constructor(e,t){this.plugin=e;this.loadSettings(t)}async loadSettings(e){this.settings=Object.assign({},Jr,e)}async saveSettings(){await this.plugin.saveData(this.settings)}},ze=class extends X.PluginSettingTab{constructor({app:t,plugin:o,settingsManager:i,cjsModuleRunner:n}){super(t,o);this.cjsModuleRunner=n,this.settingsManager=i}display(){let{containerEl:t}=this;t.empty(),this.addScriptFolderSetting(),this.addUserScriptsListSetting(),this.addSnippetsSetting()}addUserScriptsListSetting(){if(!this.settingsManager.settings.scriptsFolder){new X.Setting(this.containerEl).setName("No user scripts folder set").addExtraButton(i=>{i.setIcon("sync").setTooltip("Refresh").onClick(()=>{this.display()})});return}let t,o=[];try{o=Mt(this.app,this.settingsManager.settings.scriptsFolder),o=o.filter(i=>i.path.contains("node_modules")==!1)}catch(i){console.error(`Failed to read user scripts folder: ${i.message}`),new X.Notice("Failed to read user scripts folder")}if(o.length==0)t="No user scripts found";else{let i=this.addUserScriptEntries(o);i==0?t="No user scripts found":t=`Found ${i} user scripts`}new X.Setting(this.containerEl).setName(t).addExtraButton(i=>{i.setIcon("sync").setTooltip("Refresh").onClick(()=>{this.display()})})}addUserScriptEntries(t){let o=0,i=this.settingsManager.settings.enabledScripts,n=[...i];for(let s of t)s.extension==="js"&&(new X.Setting(this.containerEl).setName(s.name).setDesc("Enable this script").addToggle(p=>{p.setValue(i.includes(s.path)).onChange(a=>{let f=i.indexOf(s.path);a&&f==-1?i.push(s.path):!a&&f>-1&&i.splice(f,1),this.settingsManager.saveSettings(),this.display(),a?this.cjsModuleRunner.runJsModule(s.path):this.cjsModuleRunner.runOnunload(s.path)})}),o++),i.includes(s.path)&&n.remove(s.path);if(n.length>0){for(let s of n)i.remove(s);this.settingsManager.saveSettings()}return o}addSnippetsSetting(){let{containerEl:t}=this;t.createEl("h2",{text:"Snippets"});let o=this.settingsManager.settings.snippets;this.settingsManager.settings.snippets.forEach((n,s)=>{new X.Setting(this.containerEl).addExtraButton(a=>{a.setIcon("right-arrow").setTooltip("Run snippet").onClick(()=>{let f=o[s];this.cjsModuleRunner.runSnippet(f,s)})}).addTextArea(a=>{let f=a.setPlaceholder("User script").setValue(o[s]).onChange(l=>{let g=o[s],b=this.settingsManager.settings.snippets.indexOf(g);b>-1&&(this.settingsManager.settings.snippets[b]=l,this.settingsManager.saveSettings())});return f.inputEl.setAttr("rows",5),f.inputEl.addClass("obsidian_user_plugins_snippet"),f}).addExtraButton(a=>{a.setIcon("cross").setTooltip("Delete").onClick(()=>{let f=o[s],l=this.settingsManager.settings.snippets.indexOf(f);l>-1&&(this.settingsManager.settings.snippets.splice(l,1),this.settingsManager.saveSettings(),this.display())})}).infoEl.remove()}),new X.Setting(this.containerEl).addButton(n=>{n.setButtonText("Add new user script").setCta().onClick(()=>{this.settingsManager.settings.snippets.push(""),this.settingsManager.saveSettings(),this.display()})}).infoEl.remove()}addScriptFolderSetting(){this.containerEl.createEl("h2",{text:"Scripts"}),new X.Setting(this.containerEl).setName("Scripts folder location").setDesc("Files in this folder can be run on Obsidian startup").addSearch(t=>{new _e(this.app,t.inputEl),t.setPlaceholder("Ex.: Folder/MyScripts").setValue(this.settingsManager.settings.scriptsFolder).onChange(o=>{this.settingsManager.settings.scriptsFolder=o,this.settingsManager.saveSettings()})})}};var Xe=require("obsidian");var Gt=require("obsidian"),dt=class extends Gt.FuzzySuggestModal{constructor(t,o,i,n,s,p,a){super(t);this.textItems=o;this.items=i;this.resolve=n;this.reject=s;this.resolved=!1;this.setPlaceholder(p),this.limit=a||20}getItems(){return this.items}getItemText(t){return this.textItems instanceof Function?this.textItems(t):this.textItems[this.items.indexOf(t)]||"Undefined"}onChooseItem(t,o){this.resolved=!0,this.resolve(t)}selectSuggestion(t,o){this.onChooseSuggestion(t,o),this.close()}onClose(){this.resolved||this.reject("Modal cancelled")}onChooseSuggestion(t,o){this.onChooseItem(t.item,o)}};async function Kt(r,e,t,o,i){return new Promise((n,s)=>{new dt(r,e,t,n,s,o,i).open()})}var Le=class{constructor(e){this.app=e}suggest(e,t,o,i){return Kt(this.app,e,t,o||"",i)}notify(e,t=5e3){new Xe.Notice(e,t)}getAllFolders(){return this.app.vault.getAllLoadedFiles().filter(e=>e instanceof Xe.TFolder).map(e=>e.path)}async openFile(e,t={}){let o;t.paneType==="split"?o=this.app.workspace.getLeaf(t.paneType,t.direction):o=this.app.workspace.getLeaf(t.paneType),t.mode?await o.openFile(e,{state:{mode:t.mode}}):await o.openFile(e),t.focus&&this.app.workspace.setActiveLeaf(o,{focus:!0})}};var Je=class extends Qt.Plugin{async onload(){this.settingsManager=new qe(this,await this.loadData()),this.commonJsModuleLoader=new Oe(this,this.settingsManager.settings),this.passedModules={obsidian:Yr},this.helpers=new Le(this.app),this.api=new Le(this.app),this.addSettingTab(new ze({settingsManager:this.settingsManager,cjsModuleRunner:this.commonJsModuleLoader,app:this.app,plugin:this})),this.app.workspace.onLayoutReady(async()=>{try{await this.commonJsModuleLoader.onload()}catch(t){Error.captureStackTrace(t),this.logScriptError(`Failed with error: ${t.message}`,t)}})}logScriptError(t,o){this.logError(`${t}. stacktrace: ${o.stack}`)}logError(t){console.error(`[obsidian-user-plugins] ${t}`)}async onunload(){await this.commonJsModuleLoader.onunload()}};

/* nosourcemap */